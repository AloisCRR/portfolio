---
import type { SkillCategory } from "../types/directus";
import {
  CodeIcon,
  LayoutIcon,
  ServerIcon,
  DatabaseIcon,
  CloudIcon,
  ToolIcon,
  PenToolIcon,
  SmartphoneIcon,
  CodesandboxIcon,
  LayersIcon,
} from "astro-feather";

interface Props {
  skills?: SkillCategory[];
}

const { skills = [] } = Astro.props;

// Helper function to determine icon for a skill category
const getCategoryIcon = (category: string) => {
  const iconMap: Record<string, any> = {
    "Programming Languages": CodeIcon,
    Frontend: LayoutIcon,
    Backend: ServerIcon,
    Databases: DatabaseIcon,
    DevOps: CloudIcon,
    Tools: ToolIcon,
    Design: PenToolIcon,
    Frameworks: LayersIcon,
    Mobile: SmartphoneIcon,
    Cloud: CloudIcon,
  };

  return iconMap[category] || CodesandboxIcon;
};
---

<section id="skills" class="scroll-mt-16 relative">
  <div class="relative z-10">
    <h2 class="text-3xl font-bold mb-12">Skills</h2>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto px-4"
    >
      {
        skills.length > 0 ? (
          skills.map((skill) => {
            const { category, skills: skillItems } = skill.resume_skills_id;
            const Icon = getCategoryIcon(category);

            return (
              <div class="bg-white/50 dark:bg-slate-800/40 border border-slate-200 dark:border-slate-700 rounded-lg p-6 text-center transition-transform hover:-translate-y-1 hover:shadow-md">
                <div class="flex justify-center items-center w-12 h-12 mx-auto mb-3 bg-blue-100 dark:bg-blue-900/40 rounded-full">
                  {<Icon size={24} class="text-blue-500 dark:text-blue-400" />}
                </div>
                <h3 class="text-lg font-semibold mb-3">{category}</h3>
                <ul class="space-y-1">
                  {skillItems.map((item) => (
                    <li class="text-sm py-1 border-b border-dashed border-slate-400 dark:border-slate-600 last:border-0">
                      {item.name}
                    </li>
                  ))}
                </ul>
              </div>
            );
          })
        ) : (
          <div class="p-6 border border-slate-200 dark:border-slate-700 rounded-lg w-full shadow-sm">
            <p class="text-center text-slate-600 dark:text-slate-400">
              Skills will be loaded from Directus CMS.
            </p>
          </div>
        )
      }
    </div>
  </div>
</section>

<style>
  /* No custom styles needed - using Tailwind classes instead */
</style>
